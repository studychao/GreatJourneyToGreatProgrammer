Web Technology

## TCP & UDP

TCP 和USP是OSI模型中传输层的协议。
TCP提供可靠的通信传输，而UDP则常被用于让广播和细节控制交给应用的通信传输

UDP (User Datagram Protocol)
UDP 不提供复杂的控制机制，利用IP提供面向无连接的通信服务。并且它是将应用程序发来的数据在收到的那一刻，立刻按照原样发送到网络上的一种机制。

TCP (transmission Control Protocol 传输控制协议) 面向连接的协议，收发数据前，必须和对方建立可靠的链接。一个TCP必须经过三次“对话”才能建立
简单描述简单过程：
1）主机A向主机B发出连接请求数据包：“我想给你发数据，可以吗？”，这是第一次对话；

2）主机B向主机A发送同意连接和要求同步 （同步就是两台主机一个在发送，一个在接收，协调工作）的数据包 ：“可以，你什么时候发？”，这是第二次对话；

3）主机A再发出一个数据包确认主机B的要求同步：“我现在就发，你接着吧！”， 这是第三次对话。

三次“对话”的目的是使*数据包的发送和接收同步*， 经过三次“对话”之后，主机A才向主机B正式发送数据。

TCP三次握手过程🤝
第一次握手： 主机A 向主机B 发送一个含有同步序列号（SYN）的标志位的数据段给主机B，向主机B请求建立连接，通过这个数据段，主机A告诉主机B两件事：我要和你通信；你可以用哪个序列号作为起始数据段来回应。

第二次握手： 主机B 收到主机A 用一个带有确认应答（ACK）和同步序列号（SYN）标志位的数据段响应主机A，也告诉主机A两件事：我收到你的请求了，你可以传输数据了；你要用哪个序列号作为起始数据段回应我

第三次握手：主机A 收到数据段后，再发送一个确认应答，确认已收到主机B的数据段————“我已收到回复，我现在要开始传输实际数据了” 3次握手就完成了，可以传输数据了

三次握手*特点*
没有应用层数据，
SYN标志位只有在TCP建立时才能被置1，握手完成后SYN标志位置0

TCP四次分手👋
第一次分手： 主机A完成数据传输后，将控制位FIN置1，提出停止TCP连接请求
第二次分手： 主机B收到FIN后对其作出响应，确认这一方向上的TCP连接将关闭，将ACK置1
第三次分手： 由B端提出反方向关闭请求，将FIN置1
第四次分手： 主机A对主机B请求确认，将ACK置1，双方向关闭

*名词解释*
ACK TCP报头的控制位 确认由目的端发出，用它来告诉发送端这个序列号之前的数据段都收到了，确认号为X，则表示前X-1个数据段都收到了，只有当ACK=1时，确认号有效，ACK=0时，无效。

SYN 同步序列号 TCP建立连接时将这个位置1

FIN 发送端完成发送任务位，当TCP完成数据传输需要断开时，提出断开连接的一方将此位置置1

UDP(User Data Protocol 用户数据报协议)
1. UDP 是一个*非连接*协议，传输数据之前源端和终端不建立连接，当它想传送时就简单地去抓取来自应用程序的数据，并尽可能快地把它扔到网络上。在发送端，UDP传送数据的速度仅仅是受应用程序生成数据的速度、计算机能力和传输宽带的限制。在接收端，UDP把每个信息段放在队列中，应用程序每次从队列中读一个信息段。

2. 由于传输数据不建立连接，因此也就不需要维护连接状态，包括收发状态等，因此一台服务机可同时向多个客户机传输相同的信息（因为不用维护连接状态）

3. UDP信息报标题很短，仅8个字节;相对于TCP20个字节信息报额外开销小

4. UDP尽最大努力交付，即不保证可靠交付，因此主机不需要维持复杂链接状态表

5. “ping”命令的原理就是向对方主机发送UDP数据包，然后对方主机确认收到数据包，ping命令用来探测主机到主机之间是否通信，如果不能ping到某台主机，表明不能和这台主机建立连接。ping命令是使用IP和网络控制信息协议（ICMP），因而没有涉及到任何传输协议和应用程序，它发送icmp回送请求信息给目的主机。

*icmp* 目的主机必须返回ICMP回送应答消息给源主机。如果源主机在一定时间内收到应答，则认为可达。

*区别*
1. TCP基于连接；UDP无连接
2. TCP对系统资源要求高（20字节） UDP少 （8）
3. UDP程序结构较简单
4. 流模式与数据报模式
5. TCP保证数据正确性，UDP可能丢包
6. TCP保证数据顺序，UDP不保证

## OSI 开放式系统互联通信参考模型 （Open System Interconnection Reference Model）
1）物理层
物理层 在局部局域网上传送数据帧(data frame)，负责管理计算机通信设备和网络媒体互通

2） 数据链路层
数据链路层负责网路寻址、错误侦测和改错。当表头和表尾被加至数据包时，会形成帧。

3）网络层
网络层决定数据的路径选择和转寄，将网络表头（NH）加至数据包，以形成分组。网络表头包含了网络数据

4）传输层 
传输层把传输表头（TH）加至数据以形成数据包。传输表头包含了所使用的协议等发送信息。

5）会话层
会话层 负责在数据传输中设置和维护计算机网络中两台计算机之间的通信

6）表达层
表达层把数据转换为能与接受着系统格式兼容并适合传输的格式

7）应用层
应用层 提供为应用软件而设的接口，以设置与另一应用软件之间的通信。例如：HTTP，HTTPS，FTP……

## TCP/IP
是一个协议簇。里面包括很多协议，UDP是其中一个，之所以命名为TCP/IP协议，因为TCP和IP是其中很重要的协议。
协议簇中包括应用层，传输层，网络层，网络访问层

应用层包括
1） 超文本传输协议HTTP 万维网基本协议
2） 文件传输 TFTP简单文件传输协议
3） 远程登录 Telnet 提供远程访问其他主机功能，允许用户登录Internet主机，并在这台主机上执行命令
4） 网络管理 SNMP简单网络管理协议 该协议提供了监控网络设备的方法，以及配置管理，统计信息收集，性能管理及安全感里
5） 域名系统 DNS 该系统用于在Internet中将域名及其公共广播的网络节点转换成IP地址

网络层包括
1） Internet协议(IP);
2) Internet控制信息协议(ICMP);
3) 地址解析协议(ARP);
4) 反向地址解析协议(RARP).

## HTTP 
HTTP是一个客户端（用户）和服务端（网站）之间请求和应答的标准，通常使用TCP协议。通过使用网络浏览器、网络爬虫或者其它的工具，客户端发起一个HTTP请求到服务器上指定端口（默认80）。我们称客户端为*用户代理程序*(user agent)。应答的服务器上存储着一些资源，比如HTML文件和图像，我们称这个应答服务器为源服务器(origin server。在用户代理和源服务器中间可能存在多个“中间层”，比如代理服务器、网关或者隧道.


## 端口及服务
21 FTP（文件传输协议）
22 SSH 
Secure Shell（安全外壳协议，简称SSH）是一种加密的网络传输协议，可在不安全的网络中为网络服务提供安全的传输环境。SSH通过在网络中创建安全隧道来实现SSH客户端与服务器之间的连接。虽然任何网络服务都可以通过SSH实现安全传输，SSH最常见的用途是*远程登录系统*，人们通常利用SSH来传输命令行界面和远程执行命令。使用频率最高的场合类Unix系统
23 Telnet（远程登录）服务
25 SMTP（简单邮件传输协议）
53 DNS域名服务器
80 HTTP超文本传输协议
110 POP3邮件协议
443 HTTPS
1080 Sockets
1521 Oracle数据库默认端口

## 私有（保留）地址
- A类：10.0.0.0 - 10.255.255.255
- B类: 172.16.0.0 - 172.31.255.255
- C类： 192.168.0.0 - 192.168.255.255

## IP地址分为哪几类？
A-> 政府
B-> 中等规模公司
C-> 任何需要的人
D-> 组播
E-> 实验/今后所用
[pic ip_class]
## IP地址
网络号标示某个网络，主机号标志在该网络上的一个特定主机。